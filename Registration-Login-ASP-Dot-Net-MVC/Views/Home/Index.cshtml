@{
    ViewData["Title"] = "User List";
}

<h1 class="mt-5">User List</h1>

<div id="userList" class="mt-3"></div>

@section Scripts {
    <script>
        // Fetch data from the API endpoint
        fetch('/api/Account')
            .then(response => response.json())
            .then(data => {
                // Render the user list
                renderUserList(data);
            })
            .catch(error => console.error('Error fetching data:', error));

        // Function to render the user list
        function renderUserList(users) {
            const userListContainer = document.getElementById('userList');

            // Create a table
            const table = document.createElement('table');
            table.classList.add('table');

            // Create table head
            const thead = document.createElement('thead');
            thead.innerHTML = `
                        <tr>
                            <th scope="col">Username</th>
                            <th scope="col">Email</th>
                        </tr>
                    `;
            table.appendChild(thead);

            // Create table body
            const tbody = document.createElement('tbody');
            users.forEach(user => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                            <td>${user.username}</td>
                            <td>${user.email}</td>
                        `;
                tbody.appendChild(tr);
            });
            table.appendChild(tbody);

            // Append the table to the container
            userListContainer.appendChild(table);
        }
    </script>
}
